(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,n){},108:function(e,t,n){},110:function(e,t,n){},112:function(e,t,n){},114:function(e,t,n){},116:function(e,t,n){},118:function(e,t,n){},122:function(e,t,n){},125:function(e,t,n){},127:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t),n.d(t,"get",function(){return i}),n.d(t,"set",function(){return l}),n.d(t,"makeForm",function(){return r});var a=n(0),o=n.n(a);function i(e,t){var n=(t=t.replace(/^\.+/,"")).split(/[.[]/);if(1===n.length)return e[n[0]];if("["===t[0]){var a=t.match(/\[[0-9]+\]/)[0].slice(1,-1),o=t.slice(a.length+2);return i(e[Number(a)],o)}var l=t.slice(n[0].length);return i(e[n[0]],l)}function l(e,t,n){var a=(t=t.replace(/^\.+/,"")).split(/[.[]/);if(1===a.length)e[a[0]]=n;else if("["===t[0]){var o=t.match(/\[[0-9]+\]/)[0].slice(1,-1),i=t.slice(o.length+2);l(e[Number(o)],i,n)}else{var r=t.slice(a[0].length);l(e[a[0]],r,n)}}function r(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if("undefined"===typeof e.type||"object"===typeof e.type){if(!Array.isArray(e))return o.a.createElement("div",{key:a,name:a},Object.keys(e).filter(function(t){e[t].conditions;return!0}).map(function(o){return r(e[o],t,n,a+(a?".":"")+o)}));if(1===e.length)return n>=0&&o.a.createElement("div",{name:a},Object.keys(e[0]).map(function(o){return r(e[0][o],t,n,a+"["+n+"]."+o)}))}else switch(e.type){case"title":return o.a.createElement("h3",{key:e.name},e.name);case"select":return o.a.createElement(o.a.Fragment,null,e.name,":",o.a.createElement("select",{name:a,value:i(t,a)},Object.entries(e.options).map(function(e,t){return o.a.createElement("option",{key:t,value:e[0]},e[1])})),o.a.createElement("br",null));default:return o.a.createElement(o.a.Fragment,null,e.name,":",o.a.createElement("input",{type:e.type,name:a,min:e.min,max:e.max,step:e.step,checked:i(t,a),value:i(t,a)}),o.a.createElement("br",null))}}},159:function(e,t){},180:function(e,t,n){},182:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(22),l=n.n(i),r=n(10),c=n(20),s=n(7),u=n(8),m=n(11),p=n(9),d=n(12),f=n(63),g=n(21),h=n.n(g),E=n(4),b=n.n(E),v=(n(102),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).toggleConfigLock=function(){console.log("click"),n.props.configLocked?n.props.api.unlockConfig():n.props.api.saveConfig()},n.openUploadModal=function(){n.setState({uploadModalIsOpen:!0}),n.props.api.toggleMenu()},n.closeUploadModal=function(){n.setState({uploadModalIsOpen:!1})},n.state={uploadModalIsOpen:!1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{isOpen:this.state.uploadModalIsOpen,onRequestClose:this.closeUploadModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"File Upload Modal"},o.a.createElement("h2",null,"Upload an excel file"),o.a.createElement("form",{id:"uploadForm",action:"importFile",method:"post",enctype:"multipart/form-data"},o.a.createElement("input",{type:"button",value:"Import .xls",onclick:function(){}}),o.a.createElement("input",{type:"file",name:"importFile",accept:".xls"}))),o.a.createElement(f.slide,{right:!0,customBurgerIcon:!1,pageWrapId:"page-wrap",outerContainerId:"outer-container",isOpen:this.props.isMenuOpen,onStateChange:function(t){return!t.isOpen&&e.props.api.toggleMenu()},width:400},o.a.createElement("span",{className:"menu-item menu-item--clickable"},"Unlock settings",o.a.createElement(h.a,{onClick:function(t){console.log(t.target),e.toggleConfigLock()},readOnly:!0,checked:!this.props.configLocked})),this.props.writeLogs&&o.a.createElement("span",{className:"menu-item menu-item--clickable",onClick:this.openLogModal},"Log files"),this.props.exposeUpload&&o.a.createElement("span",{className:"menu-item menu-item--clickable",onClick:this.openUploadModal},"Import Excel"),o.a.createElement("span",{className:"menu-item menu-item--clickable",onClick:function(){window.confirm("Are you sure you want to reboot?")&&(e.props.api.reboot(),e.props.api.toggleMenu())}},"Reboot unit"),this.props.exposeShutdown&&o.a.createElement("span",{className:"menu-item menu-item--clickable",onClick:function(){window.confirm("Are you sure you want to shutdown?")&&e.props.api.shutdown()}},"Shutdown unit"),o.a.createElement("span",{className:"menu-item"},"QS code: ",this.props.QS),o.a.createElement("a",{className:"menu-item",href:"/settings"},"(OLD) serial settings"),o.a.createElement("a",{className:"menu-item",href:"/filesettings"},"(OLD) other settings"),o.a.createElement("a",{className:"menu-item",href:"/fileupload"},"(OLD) upload file")))}}]),t}(a.Component));var O=Object(r.b)(function(e){return e.config.loaded&&e.static.loaded?{configLocked:e.config.locked,isMenuOpen:e.misc.isMenuOpen,QS:e.static.QS,writeLogs:e.config.logger.writeToFile,exposeUpload:e.static.exposeUpload,exposeShutdown:e.static.exposeShutdown}:{configLocked:!1,isMenuOpen:!1,QS:"null",writeLogs:!1,exposeUpload:!1,exposeShutdown:!1}})(v),C=n(29),y=n(23),I=n(2),L=n.n(I),N=n(3),M=n(6),k=n.n(M),T=n(13),x=(n(108),{serial:{coms:[{testMessage:{name:"Test value",type:"text"},reader:{name:"MBDC Reader",type:"checkbox"},baudRate:{name:"Baudrate/Port",type:"number",min:0,step:1},stopBits:{name:"Number of stop bits",type:"number",min:0,step:1},bits:{name:"Number of data bits",type:"number",min:0,step:1},parity:{name:"Parity of data",type:"select",options:{none:"None",even:"Even",odd:"Odd",mark:"Mark",space:"Space"}},RTSCTS:{name:"RTS/CTS",type:"checkbox"},XONXOFF:{name:"XON/XOFF",type:"checkbox"},name:{name:"Name of port",type:"text"},entries:{name:"Number of entries",type:"number",min:0,step:1},numeric:{name:"Treat value as number",type:"checkbox"},average:{name:"Take average",type:"checkbox"},factor:{name:"Factor",type:"number"},digits:{name:"Digits/rounding",type:"number",min:0,step:1},alwaysPositive:{name:"Always positive",type:"checkbox"},timeoutReset:{name:"Reset after timeout",type:"checkbox"},timeout:{name:"Timeout in seconds",type:"number",min:0,step:1},prefix:{name:"Prefix",type:"text"},postfix:{name:"Suffix",type:"text"}}]}}),w=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).openConfigModal=function(e){n.setState({configModalIsOpen:!0,configComIndex:e})},n.closeConfigModal=function(){n.setState({configModalIsOpen:!1})},n.state={configModalIsOpen:!1,configComIndex:-1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{isOpen:this.state.configModalIsOpen,onRequestClose:this.closeConfigModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"Table Configuration Modal"},this.state.configModalIsOpen&&o.a.createElement("form",{onChange:this.props.api.changeConfig},o.a.createElement("h2",null,"Configuration for com",this.state.configComIndex),Object(T.makeForm)(x,this.props.config,this.state.configComIndex))),this.props.coms.map(function(t,n){return o.a.createElement("div",{key:n,className:"comElement",onClick:e.props.configLocked?null:function(){return e.openConfigModal(n)}},o.a.createElement("div",{className:"comElement--title"},o.a.createElement("div",{className:"center"},o.a.createElement(k.a,null,o.a.createElement("div",null,t.name)),o.a.createElement(k.a,{compressor:2},o.a.createElement("div",null,t.average&&"Average ".concat(t.entries))))),o.a.createElement("div",{className:L()("comElement--content",{"comElement--content--testMode":e.props.testMode})},o.a.createElement("div",{className:"center"},o.a.createElement(k.a,{compressor:.9},o.a.createElement("div",null,t.entry)))))}))}}]),t}(a.Component);var S=Object(r.b)(function(e){return{coms:e.internal.coms.map(function(t,n){return Object(N.a)({},t,e.config.serial.coms[n])}),configLocked:e.config.locked,config:e.config,testMode:e.config.serial.testMode}})(w);n(110);b.a.setAppElement("#root");var j={output:{ports:[{name:{name:"Name of output",type:"text"},formula:{name:"Formula for output",type:"text"},execute:{name:"Only on execute",type:"checkbox"},timeout:{name:"Timeout in seconds",type:"number",min:0,step:1}}]}},F=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).openConfigModal=function(e){n.setState({configModalIsOpen:!0,configPortIndex:e})},n.closeConfigModal=function(){n.setState({configModalIsOpen:!1})},n.state={configModalIsOpen:!1,configPortIndex:-1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{isOpen:this.state.configModalIsOpen,onRequestClose:this.closeConfigModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"Output Configuration Modal"},this.state.configModalIsOpen&&o.a.createElement("form",{onChange:this.props.api.changeConfig},o.a.createElement("h2",null,"Configuration for output ",this.state.configPortIndex+1),Object(T.makeForm)(j,this.props.config,this.state.configPortIndex))),o.a.createElement("div",{className:"buttonList"},o.a.createElement("div",{className:"buttonList--title"},o.a.createElement("div",{className:"center"},o.a.createElement(k.a,null,o.a.createElement("div",null,"Outputs")))),this.props.outputs.map(function(e,t){return Object(N.a)({},e,{index:t})}).filter(function(t,n){return e.props.portsEnabled[n]||""!==t.name||!e.props.configLocked}).map(function(t){var n="buttonList--list--indicator--output";return t.isForced&&(n+="Forced"),t.state?n+="On":t.result&&!t.isForced?n+="Execute":n+="Off",o.a.createElement("div",{key:t.index,className:"buttonList--list--item",onClick:e.props.configLocked?function(){return e.props.api.forceOutput(t.index)}:function(){return e.openConfigModal(t.index)}},o.a.createElement("div",{className:"buttonList--list--indicator "+n},o.a.createElement("div",{className:"center"},o.a.createElement(k.a,{compressor:1.05},o.a.createElement("div",null,t.name)))))})))}}]),t}(a.Component);var A=Object(r.b)(function(e){return{outputs:e.internal.outputs.map(function(t,n){return Object(N.a)({},t,{name:e.config.output.ports[n].name})}),configLocked:e.config.locked,config:e.config,portsEnabled:e.config.output.ports.map(function(e){return""!==e.formula})}})(F);n(112);b.a.setAppElement("#root");var _={input:{ports:[{name:{name:"Name of cell",type:"text"},formula:{name:"Command for input",type:"select",options:{"":"",exe:"Execute",exebl:"Execute Block",teach:"SL Teach",restart:"Restart",shutdown:"Shutdown"}},invert:{name:"Invert follow",type:"checkbox"},follow:{name:"Follow output",type:"select",options:{"-1":"None",0:"Follow 0"}},timeout:{name:"Debounce timeout in milliseconds",type:"number",min:0,step:1},manualTimeout:{name:"Manual timeout in seconds",type:"number",min:0,step:1}}]}},R=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).openConfigModal=function(e){n.setState({configModalIsOpen:!0,configPortIndex:e})},n.closeConfigModal=function(){n.setState({configModalIsOpen:!1})},n.state={configModalIsOpen:!1,configPortIndex:-1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{isOpen:this.state.configModalIsOpen,onRequestClose:this.closeConfigModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"Input Configuration Modal"},this.state.configModalIsOpen&&o.a.createElement("form",{onChange:this.props.api.changeConfig},o.a.createElement("h2",null,"Configuration for input ",this.state.configPortIndex+1),Object(T.makeForm)(_,this.props.config,this.state.configPortIndex))),o.a.createElement("div",{className:"buttonList inputList"},o.a.createElement("div",{className:"buttonList--title"},o.a.createElement("div",{className:"center"},o.a.createElement(k.a,null,o.a.createElement("div",null,"Inputs")))),this.props.inputs.map(function(e,t){return Object(N.a)({},e,{index:t})}).filter(function(t,n){return e.props.portsEnabled[n]||""!==t.name||!e.props.configLocked}).map(function(t){var n="buttonList--list--indicator--input";return t.isForced&&(n+="Forced"),n+=t.state?"On":"Off",o.a.createElement("div",{key:t.index,className:"buttonList--list--item",onClick:e.props.configLocked?function(){return e.props.api.forceInput(t.index)}:function(){return e.openConfigModal(t.index)}},o.a.createElement("div",{className:"buttonList--list--indicator "+n},o.a.createElement("div",{className:"center"},o.a.createElement(k.a,{compressor:1.05},o.a.createElement("div",null,t.name)))))})))}}]),t}(a.Component);var U=Object(r.b)(function(e){return{inputs:e.internal.inputs.map(function(t,n){return Object(N.a)({},t,{name:e.config.input.ports[n].name})}),configLocked:e.config.locked,config:e.config,portsEnabled:e.config.input.ports.map(function(e){return""!==e.formula})}})(R),P=(n(114),function(e){var t,n=e.index,a=e.cell;switch(a.type){case"manual":t=o.a.createElement("input",{type:"text",className:L()("tableCell--content--input",{"tableCell--content--input--text":!a.numeric},{"tableCell--content--input--numeric":a.numeric}),onChange:function(t){return e.manualFunction(n,t.target.value)},value:a.value}),e.cell.numeric&&(t=o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{onClick:function(){e.manualFunction(n,Number(a.value)-1)}},"-"),t,o.a.createElement("button",{onClick:function(){e.manualFunction(n,Number(a.value)+1)}},"+")));break;case"menu":var i=[{value:"",description:""}].concat((a.formula.match(/{[0-9.]+:\w+}/g)||[]).map(function(e){var t=e.split(":");return{value:Number(t[0].slice(1)),description:t[1].slice(0,-1)}}));t=o.a.createElement("select",{className:L()("tableCell--content--input",{"tableCell--content--input--text":!a.numeric},{"tableCell--content--input--numeric":a.numeric}),onChange:function(t){return e.manualFunction(n,t.target.value)},value:a.value},i.map(function(e){return o.a.createElement("option",{value:e.value},e.description)})),a.numeric&&(t=o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{onClick:function(){var t=i.findIndex(function(e){return e.value===a.value})-1;t<0&&(t=i.length-1),e.manualFunction(n,i[t].value)}},"-"),t,o.a.createElement("button",{onClick:function(){var t=i.findIndex(function(e){return e.value===a.value})+1;0!==t&&t!==i.length||(t=0),e.manualFunction(n,i[t].value)}},"+")));break;default:t=a.value}return o.a.createElement("div",{className:L()("tableCell",{"tableCell--notFound":e.notFound})},o.a.createElement("div",{className:"tableCell--title",onClick:e.openModal},o.a.createElement(k.a,null,o.a.createElement("div",{className:"center"},a.name))),o.a.createElement("div",{className:"tableCell--content"},o.a.createElement(k.a,{compressor:.6},o.a.createElement("div",{className:"center"},t))))});n(116);b.a.setAppElement("#root");var G={table:{cells:[{name:{name:"Name of cell",type:"text"},type:{name:"Type of content",type:"select",options:{normal:"Normal",date:"Date",manual:"Input",menu:"Menu"}},numeric:{name:"Treat value as a number",type:"checkbox"},formula:{name:"Formula for cell value",type:"text"},digits:{name:"Number of digits",type:"number",min:0,step:1},resetOnExe:{name:"Reset value after execute",type:"checkbox"}}]}},D=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).openConfigModal=function(e){n.setState({configModalIsOpen:!0,configCellIndex:e})},n.closeConfigModal=function(){n.setState({configModalIsOpen:!1})},n.state={configModalIsOpen:!1,configCellIndex:-1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.cells.filter(function(t){return!e.props.configLocked||t.formula||t.name}).map(function(t,n){return Object(N.a)({},t,e.props.cellConfig[n])});return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{isOpen:this.state.configModalIsOpen,onRequestClose:this.closeConfigModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"Table Configuration Modal"},this.state.configModalIsOpen&&o.a.createElement("form",{onChange:this.props.api.changeConfig},o.a.createElement("h2",null,"Configuration for cell"," ",String.fromCharCode(65+Math.floor(this.state.configCellIndex/5)),this.state.configCellIndex%5+1),Object(T.makeForm)(G,this.props.config,this.state.configCellIndex))),o.a.createElement("div",{className:"table--grid table--grid--".concat(t.length)},t.map(function(t,n){return o.a.createElement(P,{key:n,cell:t,index:n,notFound:e.props.notFound,manualFunction:e.props.api.tableManual,openModal:e.props.configLocked?e.props.openLog:function(){return e.openConfigModal(n)}})})))}}]),t}(a.Component);var q=Object(r.b)(function(e){return{cells:e.internal.cells.map(function(t,n){return Object(N.a)({},t,{name:e.config.table.cells[n].name})}),configLocked:e.config.locked,config:e.config,cellConfig:e.config.table.cells,notFound:e.internal.tableNotFound}})(D),H=(n(118),n(120),{selfLearning:{enabled:{name:"Enabled type",type:"select",options:{off:"Off",com0:"Com 0",com1:"Com 1",com0ind:"Com 0 Individual",com1ind:"Com 1 Individual"}},number:{name:"Number",type:"number",min:0,step:1},startCalibration:{name:"Calibration",type:"number",min:0,step:1},tolerance:{name:"Tolerance",type:"number",min:0,step:1},startTolerance:{name:"Additional tolerance during learning",type:"number",min:0,step:1},individualTolerance:{name:"Individual tolerance",type:"number",min:0,step:1},individualToleranceIncrement:{name:"Individual tolerance increment",type:"number",min:0,step:1},individualToleranceLimit:{name:"Individual tolerance limit",type:"number",min:0,step:1}}}),V=[{Header:"Com0",accessor:function(e){return e.entries[0]},id:1,style:{textAlign:"center"},width:70},{Header:"-1",accessor:function(e){return e.entries[1]},id:2,style:{textAlign:"center"},width:70},{Header:"-2",accessor:function(e){return e.entries[2]},id:3,style:{textAlign:"center"},width:70},{Header:"-3",accessor:function(e){return e.entries[3]},id:4,style:{textAlign:"center"},width:70},{Header:"-4",accessor:function(e){return e.entries[4]},id:5,style:{textAlign:"center"},width:70},{Header:"Com1",accessor:"key",style:{textAlign:"center"},width:200},{Header:function(){return o.a.createElement("input",{type:"text"})},accessor:"calibration",style:{textAlign:"center"},width:70},{Header:function(e){return o.a.createElement("button",null,"Delete")},Cell:function(e){return o.a.createElement("button",null,"Delete")},id:1,style:{textAlign:"center"},width:70}],B=["","green","yellow","orange","red"],X=["black","white","black","black","white"],K=[{Header:"Com0",accessor:"calibration",style:{textAlign:"center"},width:70},{Header:"Com1",accessor:"key",style:{textAlign:"center"},width:200},{Header:function(){return o.a.createElement("input",{type:"text"})},accessor:"calibration",style:{textAlign:"center"},width:70},{Header:"Tol",accessor:"tolerance",Cell:function(e){return o.a.createElement("div",{style:{backgroundColor:B[e.original.increments],color:X[e.original.increments]}},e.value)},style:{textAlign:"center"},width:50},{Header:"Num",accessor:"numUpdates",style:{textAlign:"center"},width:50},{Header:function(e){return o.a.createElement("button",null,"Delete")},Cell:function(e){return o.a.createElement("button",null,"Delete")},id:1,style:{textAlign:"center"},width:70}];b.a.setAppElement("#root");var Q=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).openSLModal=function(){n.setState({SLModalIsOpen:!0})},n.closeSLModal=function(){n.setState({SLModalIsOpen:!1})},n.openConfigModal=function(){n.setState({configModalIsOpen:!0})},n.closeConfigModal=function(){n.setState({configModalIsOpen:!1})},n.toggleIndividualTable=function(){n.setState({showIndividualTable:!n.state.showIndividualTable})},n.state={SLModalIsOpen:!1,configModalIsOpen:!1,showIndividualTable:!1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=[],t=[];for(var n in this.props.generalEntries)t.push({key:n,entries:this.props.generalEntries[n]});for(var a in this.props.individualEntries)e.push(Object(N.a)({key:a},this.props.individualEntries[a]));var i=["Self Learning",(this.props.calibration||0).toFixed(this.props.config.serial.coms[this.props.comIndex||0].digits)||0,Math.round(1e3*(this.props.tolerance||0))/10+"%"];return!this.props.individual&&this.props.success&&i.push(Math.round(1e3*(this.props.tolerance||0-this.props.matchedTolerance||0))/10+"%"),o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{isOpen:this.state.configModalIsOpen,onRequestClose:this.closeConfigModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"SelfLearning Configuration Modal"},this.state.configModalIsOpen&&o.a.createElement("form",{onChange:this.props.api.changeConfig},o.a.createElement("h2",null,"Configuration for SelfLearning"),Object(T.makeForm)(H,this.props.config))),o.a.createElement(b.a,{isOpen:this.state.SLModalIsOpen,onRequestClose:this.closeSLModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"SelfLearning Modal"},o.a.createElement("span",null,o.a.createElement(h.a,{checked:this.state.showIndividualTable,onChange:this.toggleIndividualTable}),"Show individual entries"),this.state.showIndividualTable?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"selfLearning--modal--title"}," UN-list "),o.a.createElement(y.a,{data:e,columns:K})):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"selfLearning--modal--title"}," SL-list "),o.a.createElement(y.a,{style:{textAlign:"center"},data:t,columns:V}))),o.a.createElement("div",{className:L()("selfLearning",["selfLearning--inProgress","selfLearning--success","selfLearning--warning"][this.props.success||0]),onClick:this.props.configLocked?this.openSLModal:this.openConfigModal},i.map(function(e,t){return o.a.createElement("div",{key:t,className:"selfLearning--cell"},o.a.createElement("div",{className:"center"},o.a.createElement(k.a,{compressor:.65},o.a.createElement("div",null,e))))})))}}]),t}(a.Component);var W=Object(r.b)(function(e){var t=e.config.locked,n=e.config;return Object(N.a)({},e.internal.selfLearning,{configLocked:t,config:n})})(Q),Y=(n(122),function(e){return o.a.createElement("div",{className:"logo",onClick:e.onClick},o.a.createElement("img",{className:"center",src:e.image,alt:e.alt}))}),J=n(64),z=n.n(J),$=n(39),Z=n.n($);n(125);b.a.setAppElement("#root");var ee={serial:{title:{name:"Serial",type:"title"},testMode:{name:"Enable test mode",type:"checkbox"},resetTrigger:{name:"Reset on zero",type:"select",options:{off:"Off",on:"On",com0:"Com 0",com1:"Com 1"}}},table:{title:{name:"Table",type:"title"},trigger:{name:"Trigger",type:"select",options:{0:"Com 0",1:"Com 1"}},useFile:{name:"Use imported file",type:"checkbox"},waitForOther:{name:"Wait for other com",type:"checkbox"},searchColumn:{name:"Column to search in",type:"number",min:0,step:1}},logger:{title:{name:"Logger",type:"title"},writeToFile:{name:"Write log to file",type:"checkbox"},logID:{name:"ID of log",type:"text"},unique:{name:"Unique log type",type:"select",options:{off:"Off",com0:"Com 0",com1:"Com 1"}},resetMode:{name:"Reset mode:",type:"select",options:{off:"Off",time:"Time of day",interval:"Time interval"}},resetValue:{name:"Reset time",type:"time",condition:"logger.resetMode==='time'"}},FTP:{title:{name:"FTP",type:"title"},automatic:{name:"Automatically upload logs on FTP",type:"checkbox"}}},te=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).openConfigModal=function(){n.setState({configModalIsOpen:!0})},n.closeConfigModal=function(){n.setState({configModalIsOpen:!1})},n.state={configModalIsOpen:!1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{isOpen:this.state.configModalIsOpen,onRequestClose:this.closeConfigModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"General Configuration Modal"},this.state.configModalIsOpen&&o.a.createElement("form",{onChange:this.props.api.changeConfig},o.a.createElement("h2",null,"General configuration"),o.a.createElement("div",{className:"infobar--modalButtons"},o.a.createElement("input",{type:"button",value:"Load default",onClick:function(){e.props.api.loadConfig("template.json")}}),o.a.createElement("input",{type:"button",value:"Save config",onClick:function(){}}),o.a.createElement("input",{type:"button",value:"Load config",onClick:function(){}})),Object(T.makeForm)(ee,this.props.config))),o.a.createElement("div",{className:"infobar",onClick:this.props.configLocked?null:this.openConfigModal},o.a.createElement(k.a,null,o.a.createElement("div",{className:"infobar--item"},o.a.createElement("div",{className:"center"},this.props.name))),o.a.createElement(k.a,null,o.a.createElement("div",{className:"infobar--item"},o.a.createElement("div",{className:"center"},this.props.ip))),o.a.createElement(k.a,null,o.a.createElement("div",{className:"infobar--item"},o.a.createElement("div",{className:"center"},Z()(this.props.time).format("HH:mm:ss")))),o.a.createElement(k.a,null,o.a.createElement("div",{className:"infobar--item"},o.a.createElement("div",{className:"center"},Z()(this.props.time).format("DD-MM-YYYY"))))))}}]),t}(a.Component);var ne=Object(r.b)(function(e){return{name:e.static.name,ip:e.misc.ip,time:e.misc.time,configLocked:e.config.locked,config:e.config}})(te);n(127),n(129);b.a.setAppElement("#root");var ae=function(e,t){var n=Math.max.apply(Math,Object(C.a)(e.map(function(e){return("".concat(e[t])||"").length})));return Math.max(50,Math.min(400,11*n))},oe=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).openLogModal=function(){n.setState({logModalIsOpen:!0,reloadInterval:setInterval(n.reloadLogEntries,1e3)}),n.reloadLogEntries()},n.reloadLogEntries=function(e){var t=e?e.target.checked:n.state.logModalUnique;(t?n.props.api.getUniqueLog:n.props.api.getLog)().then(function(e){n.setState({logTableColumns:e.data.legend.map(function(t,n){return{Header:function(){return o.a.createElement("b",null,t)},accessor:n+"",width:ae(e.data.entries,n+""),style:{textAlign:"center"}}}).filter(function(e,t){return t>=2}),logEntries:e.data.entries,logModalUnique:t})})},n.closeLogModal=function(){clearInterval(n.state.reloadInterval),n.setState({logModalIsOpen:!1})},e.api.getLogo().then(function(e){e&&n.setState({logo:e})}),n.state={logModalIsOpen:!1,logModalUnique:!1,logEntries:[],logTableColumns:[],logo:z.a,reloadInterval:null},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.loaded?o.a.createElement("div",{id:"page-wrap"},".",o.a.createElement("div",{className:L()("main",{"main--noinputs":!this.props.showInputs},{"main--notable":!this.props.showTable},{"main--nooutputs":!this.props.showOutputs})},o.a.createElement(b.a,{isOpen:this.state.logModalIsOpen,onRequestClose:this.closeLogModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"Log Modal"},this.props.uniqueLogEnabled&&o.a.createElement("span",null,o.a.createElement(h.a,{checked:this.state.logModalUnique,onChange:this.reloadLogEntries}),"Only show unique entries"),o.a.createElement("div",{className:"main--logModal"},o.a.createElement("div",null,o.a.createElement("div",{className:"main--logModal--title"},this.state.logModalUnique?"Unique Log":"Normal Log"),o.a.createElement(y.a,{style:{fontSize:13},data:this.state.logEntries,columns:this.state.logTableColumns})))),o.a.createElement("div",{className:"info"},o.a.createElement(ne,{api:this.props.api})),o.a.createElement("div",{className:"logo"},o.a.createElement(Y,{image:this.state.logo,alt:"LOGO",onClick:this.props.api.toggleMenu})),o.a.createElement("div",{className:L()("coms",{"coms--noselfLearning":!this.props.showSelfLearning})},this.props.showSelfLearning&&o.a.createElement(W,{api:this.props.api}),o.a.createElement(S,{api:this.props.api})),this.props.showOutputs&&o.a.createElement("div",{className:"outputs"},this.props.showOutputs&&o.a.createElement(A,{api:this.props.api})," "),this.props.showInputs&&o.a.createElement("div",{className:"inputs"},this.props.showInputs&&o.a.createElement(U,{api:this.props.api})),this.props.showTable&&o.a.createElement("div",{className:"table"},o.a.createElement(q,{api:this.props.api,openLog:this.openLogModal})))):o.a.createElement("div",{className:"loadingScreen"},"Loading")}}]),t}(a.Component);var ie=Object(r.b)(function(e){var t=e.config.locked;if(!e.config.loaded||!e.static.loaded)return{loaded:!1};var n=e.static.exposeUpload&&(!t||e.config.table.cells.reduce(function(e,t){return e||t.name},!1)),a=!t||e.config.input.ports.reduce(function(e,t){return e||t.name},!1),o=!t||e.config.output.ports.reduce(function(e,t){return e||t.name},!1);return{loaded:!0,showTable:n,showInputs:a,showOutputs:o,showPorts:e.static.exposeUpload&&(!t||a||o),showSelfLearning:e.static.enabledModules.selfLearning&&(!t||e.internal.selfLearning.enabled),configLocked:t,uniqueLogEnabled:"off"!==e.config.logger.unique}})(oe),le=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{id:"outer-container"},o.a.createElement(O,{api:this.props.api}),o.a.createElement(ie,{api:this.props.api}))}}]),t}(a.Component),re=n(5),ce=re.RECEIVE_CONFIG,se=re.CONFIG_UNLOCK,ue=re.CONFIG_LOCK,me=re.CONFIG_CHANGE,pe=n(13).set,de={loaded:!1,locked:!0,hasChanged:!1},fe=n(5).RECEIVE_STATIC,ge={loaded:!1},he=n(5),Ee=he.INPUT_PORT_STATE,be=he.OUTPUT_PORT_STATE,ve=he.SERIAL_COM_STATE,Oe=he.TABLE_CELL_STATE,Ce=he.SELFLEARNING_STATE,ye=he.TABLE_FOUND_STATE,Ie={coms:[],outputs:[],inputs:[],cells:[],selfLearning:{enabled:!1},tableNotFound:!1},Le=n(5),Ne=Le.RECEIVE_IP,Me=Le.RECEIVE_TIME,ke=Le.TOGGLE_MENU,Te={ip:"",time:(new Date).getTime(),isMenuOpen:!1},xe=Object(c.b)({config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(N.a)({},e,{loaded:!0},t.payload);case se:return Object(N.a)({},e,{locked:!1});case ue:return Object(N.a)({},e,{locked:!0});case me:if(e.locked)return e;var n=t.payload,a=n.address,o=n.value;return pe(e,a,o),Object(N.a)({},e,{hasChanged:!0});default:return e}},static:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fe:return Object(N.a)({loaded:!0},t.payload);default:return e}},internal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:var n=t.payload,a=n.index,o=n.state,i=n.isForced,l=Array.from(e.inputs);return l[a]={state:o,isForced:i},Object(N.a)({},e,{inputs:l});case be:var r=t.payload,c=r.index,s=r.state,u=r.result,m=r.isForced,p=Array.from(e.outputs);return p[c]={state:s,result:u,isForced:m},Object(N.a)({},e,{outputs:p});case ve:var d,f=t.payload,g=f.index,h=f.entry,E=f.entryTime,b=Array.from(e.coms);return d=e.coms[g]?e.coms[g].entry?[{entry:e.coms[g].entry,entryTime:e.coms[g].entryTime}].concat(Object(C.a)(e.coms[g].history)):e.coms[g].history:[],b[g]={entry:h,entryTime:E,history:d},Object(N.a)({},e,{coms:b});case Oe:var v=t.payload,O=v.index,y=v.value,I=v.manual,L=Array.from(e.cells);return L[O]={value:y,manual:I},Object(N.a)({},e,{cells:L});case Ce:return Object(N.a)({},e,{selfLearning:Object(N.a)({enabled:!0},t.payload)});case ye:return Object(N.a)({},e,{tableNotFound:t.payload});default:return e}},misc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ne:return Object(N.a)({},e,{ip:t.payload});case Me:return Object(N.a)({},e,{time:t.payload});case ke:return Object(N.a)({},e,{isMenuOpen:!e.isMenuOpen});default:return e}}}),we=n(40),Se=n.n(we),je=n(65),Fe=n(66),Ae=n.n(Fe),_e=n(17),Re=n.n(_e),Ue=n(5);var Pe=function(e){var t=Ae()(),n={input:Ue.INPUT_PORT_STATE,output:Ue.OUTPUT_PORT_STATE,table:Ue.TABLE_CELL_STATE,entry:Ue.SERIAL_COM_STATE,selfLearning:Ue.SELFLEARNING_STATE,ip:Ue.RECEIVE_IP,time:Ue.RECEIVE_TIME,notfound:Ue.TABLE_FOUND_STATE},a=function(a){t.on(a,function(t){e.dispatch({type:n[a],payload:t})})};for(var o in n)a(o);function i(n){n?t.emit("loadConfig",n,function(t){console.log(t),e.dispatch({type:Ue.RECEIVE_CONFIG,payload:JSON.parse(t)})}):Re.a.get("/config").then(function(t){console.log("Got config"),e.dispatch({type:Ue.RECEIVE_CONFIG,payload:t.data})}).catch(function(e){return console.log("/config",e)})}function l(){Re.a.get("/restart"),setTimeout(function(){i(),console.log("test")},5e3)}function r(){return(r=Object(je.a)(Se.a.mark(function e(){var t;return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.prev=1,e.next=4,Re.a.get("/logo");case 4:t="/logo";case 5:return e.prev=5,e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this,[[1,,5,8]])}))).apply(this,arguments)}return t.on("clearserial",function(){e.getState().internal.coms.forEach(function(t,n){return e.dispatch({type:Ue.SERIAL_COM_STATE,payload:{entry:"",entryTime:(new Date).getTime(),index:n}})})}),i(),Re.a.get("/static").then(function(t){console.log("Got static"),e.dispatch({type:Ue.RECEIVE_STATIC,payload:t.data}),document.title=t.data.name}),{forceInput:function(e){console.log("forceinput",e),t.emit("forceInput",e)},forceOutput:function(e){console.log("forceoutput",e),t.emit("forceOutput",e)},tableManual:function(e,n){t.emit("manual",{index:e,value:n})},getLog:function(){return Re.a.get("/comlog")},getUniqueLog:function(){return Re.a.get("/comlogu")},reboot:l,shutdown:function(){Re.a.get("/shutdown")},getLogo:function(){return r.apply(this,arguments)},toggleMenu:function(){e.dispatch({type:Ue.TOGGLE_MENU})},unlockConfig:function(){e.dispatch({type:Ue.CONFIG_UNLOCK})},saveConfig:function(){if(e.getState().config.hasChanged)if(window.confirm("Are you sure you want to save these changes?")){var n=e.getState().config;delete n.loaded,delete n.locked,delete n.hasChanged,t.emit("settings",n),e.dispatch({type:Ue.CONFIG_LOCK}),l()}else window.location.reload();else e.dispatch({type:Ue.CONFIG_LOCK})},changeConfig:function(t){var n,a=t.target.name;n="checkbox"===t.target.type?t.target.checked:"number"===t.target.type?Number(t.target.value):t.target.value,console.log({address:a,value:n}),e.dispatch({type:Ue.CONFIG_CHANGE,payload:{address:a,value:n}})},loadConfig:i}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(180);var Ge=Object(c.c)(xe,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());l.a.render(o.a.createElement(r.a,{store:Ge},o.a.createElement(le,{api:Pe(Ge)})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},5:function(e,t){e.exports=function(e){var t={};return e.forEach(function(e){t[e]=e}),t}(["RECEIVE_TIME","RECEIVE_IP","TOGGLE_MENU","RECEIVE_CONFIG","RECEIVE_STATIC","INPUT_PORT_STATE","OUTPUT_PORT_STATE","SERIAL_COM_STATE","TABLE_CELL_STATE","SELFLEARNING_STATE","CONFIG_UNLOCK","CONFIG_LOCK","CONFIG_CHANGE","TABLE_FOUND_STATE","SERIAL_CLEAR"])},64:function(e,t,n){e.exports=n.p+"static/media/Logo-MBDC.645b4549.jpg"},67:function(e,t,n){e.exports=n(182)}},[[67,2,1]]]);
//# sourceMappingURL=main.16432dea.chunk.js.map