(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){},109:function(e,t,n){},111:function(e,t,n){},113:function(e,t,n){},115:function(e,t,n){},117:function(e,t,n){},119:function(e,t,n){},125:function(e,t,n){},128:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t),n.d(t,"get",function(){return l}),n.d(t,"set",function(){return r}),n.d(t,"makeForm",function(){return c}),n.d(t,"getColumnWidth",function(){return u}),n.d(t,"daysToDate",function(){return m});var a=n(17),o=n(0),i=n.n(o);function l(e,t){var n=(t=t.replace(/^\.+/,"")).split(/[.[]/);if(1===n.length)return e[n[0]];if("["===t[0]){var a=t.match(/\[[0-9]+\]/)[0].slice(1,-1),o=t.slice(a.length+2);return o?l(e[Number(a)],o):e[Number(a)]}var i=t.slice(n[0].length);return l(e[n[0]],i)}function r(e,t,n){var a=(t=t.replace(/^\.+/,"")).split(/[.[]/);if(1===a.length)e[a[0]]=n;else if("["===t[0]){var o=t.match(/\[[0-9]+\]/)[0].slice(1,-1),i=t.slice(o.length+2);i?r(e[Number(o)],i,n):e[Number(o)]=n}else{var l=t.slice(a[0].length);r(e[a[0]],l,n)}}function c(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if("undefined"===typeof e.type||"object"===typeof e.type)return Array.isArray(e)?1===e.length?a>=0&&i.a.createElement("div",{name:o},Object.keys(e[0]).map(function(i){return c(e[0][i],t,n,a,o+"["+a+"]."+i)})):e.map(function(e,a){return c(e,t,n,a,o+"["+a+"]")}):i.a.createElement("div",{key:o,name:o},Object.keys(e).filter(function(t){e[t].conditions;return!0}).map(function(i){return c(e[i],t,n,a,o+(o?".":"")+i)}));if(!e.condition||e.condition(t,a))switch(e.type){case"title":return i.a.createElement("h3",{key:e.name},e.name);case"subtitle":return i.a.createElement(i.a.Fragment,null,i.a.createElement("b",{key:e.name},e.name),i.a.createElement("br",null));case"emphasis":var r=o.replace(/\.\w+$/,"");return i.a.createElement("div",{className:"configuration--emphasis"},c(e.contents,t,n,a,r));case"conditional":var u=o.replace(/\.\w+$/,"");return c(e.contents,t,n,a,u);case"external":return console.log(e),c(e.configuration,t,n,a,e.location);case"structArray":var m=l(t,o)||[],p=e.structure,d=e.defaults;return i.a.createElement(i.a.Fragment,null,e.name,":",i.a.createElement("br",null),m.map(function(e,a){return i.a.createElement("div",{className:"configuration--struct"},"#",a+3,i.a.createElement("input",{type:"button",value:"x",onClick:function(){m.splice(a,1),n.changeConfig(o,m)}}),c(p,t,n,a,o+"["+a+"]"))}),i.a.createElement("input",{type:"button",value:"+",onClick:function(){n.changeConfig(o,m.concat(d))}}));case"keyValue":var f=l(t,o)||[],g=e.options;return i.a.createElement(i.a.Fragment,null,e.name,":",i.a.createElement("br",null),f.map(function(e,t){return i.a.createElement(i.a.Fragment,null,i.a.createElement("input",{type:"button",value:"x",onClick:function(){f.splice(t,1),n.changeConfig(o,f)}}),i.a.createElement("input",{type:"text",onChange:function(e){n.changeConfig("".concat(o,"[").concat(t,"].value"),e.target.value)},value:e.value}),g?i.a.createElement("select",{value:e.key,onChange:function(e){n.changeConfig("".concat(o,"[").concat(t,"].key"),e.target.value)}},Object.entries(g).concat([["",""]]).map(function(e){return i.a.createElement("option",{value:e[0]},e[1])})):i.a.createElement("input",{type:"number",onChange:function(e){n.changeConfig("".concat(o,"[").concat(t,"].key"),e.target.value,{numeric:!0})},value:e.key}),i.a.createElement("br",null))}),i.a.createElement("input",{type:"button",value:"+",onClick:function(){n.changeConfig(o,f.concat({key:"",value:""}))}}),i.a.createElement("br",null));case"button":return i.a.createElement(i.a.Fragment,null,i.a.createElement("input",{type:"button",value:e.name}),i.a.createElement("br",null));case"select":return i.a.createElement(i.a.Fragment,null,e.name,":",i.a.createElement("select",{value:l(t,o),onChange:function(t){n.changeConfig(o,t.target.value,{numeric:e.numeric})}},Object.entries(e.options).map(function(e,t){return i.a.createElement("option",{key:t,value:e[0]},e[1])})),i.a.createElement("br",null));default:return i.a.createElement(i.a.Fragment,null,e.name,":",i.a.createElement("input",{type:e.type,min:e.min,max:e.max,step:e.step,checked:l(t,o),value:e.rounding?s(l(t,o),e.rounding):l(t,o),onChange:function(t){"checkbox"===t.target.type?n.changeConfig(o,t.target.checked):n.changeConfig(o,t.target.value,{numeric:"number"===e.type})}}),i.a.createElement("br",null))}}function s(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}var u=function(e,t){var n=Math.max.apply(Math,Object(a.a)(e.map(function(e){return("".concat(l(e,t))||"").length})));return Math.max(50,Math.min(400,11*n))},m=function(e){return new Date(86400*(e-25569)*1e3)}},130:function(e,t,n){},163:function(e,t){},184:function(e,t,n){},186:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(24),l=n.n(i),r=n(9),c=n(21),s=n(6),u=n(7),m=n(10),p=n(8),d=n(11),f=n(63),g=n(22),h=n.n(g),E=n(5),b=n.n(E),y=(n(103),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).toggleConfigLock=function(){n.props.isMenuOpen&&(n.props.configLocked?n.props.api.unlockConfig():n.props.api.saveConfig())},n.openUploadModal=function(){n.setState({uploadModalIsOpen:!0}),n.props.api.closeMenu()},n.closeUploadModal=function(){n.setState({uploadModalIsOpen:!1})},n.openLogModal=function(){n.setState({logModalIsOpen:!0}),n.props.api.closeMenu()},n.closeLogModal=function(){n.setState({logModalIsOpen:!1})},n.uploadLog=function(e,t){window.confirm("Do you really want to upload "+e+"?")&&n.props.api.uploadLog(e,t)},n.deleteLog=function(e){window.confirm("Do you really want to delete "+e+"?")&&n.props.api.deleteLog(e)},n.downloadAllLogs=function(){window.confirm("Do you really want to download all logs?")&&n.props.api.downloadAllLogs()},n.deleteAllLogs=function(){window.confirm("Do you really want to delete all logs?")&&n.props.api.deleteAllLogs()},n.state={uploadModalIsOpen:!1,logModalIsOpen:!1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.api.closeMenu;return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{isOpen:this.state.uploadModalIsOpen,onRequestClose:this.closeUploadModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"File Upload Modal"},o.a.createElement("h2",null,"Upload an excel file"),o.a.createElement("form",{id:"uploadForm",action:"importFile",method:"post",enctype:"multipart/form-data"},o.a.createElement("input",{type:"submit",value:"Import .xls"}),o.a.createElement("input",{type:"file",name:"importFile",accept:".xls"}))),o.a.createElement(b.a,{isOpen:this.state.logModalIsOpen,onRequestClose:this.closeLogModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"Log files Modal"},o.a.createElement("h2",null,"Upload and download log files"),o.a.createElement("form",{className:"logForm"},this.props.logList.map(function(t){return o.a.createElement(o.a.Fragment,null,t,o.a.createElement("input",{type:"button",value:"Delete",onClick:function(){e.deleteLog(t)}}),o.a.createElement("input",{type:"button",value:"Download",onClick:function(){e.props.api.downloadLog(t)}}),e.props.ftpTargets.map(function(n,a){return n.address?o.a.createElement("input",{type:"button",value:"FTP ".concat(a+1),onClick:function(){e.uploadLog(t,a)}}):null}),o.a.createElement("br",null))}),o.a.createElement("input",{type:"button",value:"Delete",onClick:function(){e.deleteAllLogs()}}),o.a.createElement("input",{type:"button",value:"Download",onClick:function(){e.downloadAllLogs()}}))),o.a.createElement(f.slide,{right:!0,customBurgerIcon:!1,pageWrapId:"page-wrap",outerContainerId:"outer-container",isOpen:this.props.isMenuOpen,onStateChange:function(t){return!t.isOpen&&e.props.api.closeMenu()},width:450},o.a.createElement("span",{className:"menu-item menu-item--clickable"},o.a.createElement("span",{onClick:function(){t(),e.toggleConfigLock()}},"Unlock settings")," ",o.a.createElement(h.a,{checked:!this.props.configLocked,onChange:function(){t(),e.toggleConfigLock()}})),this.props.writeLogs&&this.props.exposeUpload&&o.a.createElement("span",{className:"menu-item menu-item--clickable",onClick:function(){e.props.api.getLogList(),e.openLogModal(),t()}},"Log files"),this.props.exposeUpload&&o.a.createElement("span",{className:"menu-item menu-item--clickable",onClick:function(){e.openUploadModal(),t()}},"Import Excel"),o.a.createElement("span",{className:"menu-item menu-item--clickable",onClick:function(){window.confirm("Are you sure you want to reboot?")&&e.props.api.reboot(),t()}},"Reboot unit"),this.props.exposeShutdown&&o.a.createElement("span",{className:"menu-item menu-item--clickable",onClick:function(){window.confirm("Are you sure you want to shutdown?")&&e.props.api.shutdown(),t()}},"Shutdown unit"),o.a.createElement("span",{className:"menu-item"},"QS code: ",this.props.QS)))}}]),t}(a.Component));var v=Object(r.b)(function(e){return e.config.loaded&&e.static.loaded?{configLocked:e.config.locked,isMenuOpen:e.misc.isMenuOpen,QS:e.static.QS,writeLogs:e.config.logger.writeToFile,exposeUpload:e.static.exposeUpload,exposeShutdown:e.static.exposeShutdown,logList:e.misc.logList,ftpTargets:e.config.FTP.targets}:{configLocked:!1,isMenuOpen:!1,QS:"null",writeLogs:!1,exposeUpload:!1,exposeShutdown:!1,logList:[]}})(y),C=n(25),O=n(3),L=n.n(O),w=n(2),x=n(12),I=n.n(x),M=n(13),k=(n(109),{serial:{coms:[{mode:{name:"Mode",type:"select",options:{serial:"Serial",reader:"Reader",test:"Test"}},testMessage:{name:"Test value",type:"text",condition:function(e,t){return"test"===e.serial.coms[t].mode}},readerPort:{name:"Port",type:"number",min:0,step:1,condition:function(e,t){return"reader"===e.serial.coms[t].mode}},baudRate:{name:"Baudrate",type:"number",min:0,step:1,condition:function(e,t){return"serial"===e.serial.coms[t].mode}},stopBits:{name:"Number of stop bits",type:"number",min:0,step:1,condition:function(e,t){return"serial"===e.serial.coms[t].mode}},bits:{name:"Number of data bits",type:"number",min:0,step:1,condition:function(e,t){return"serial"===e.serial.coms[t].mode}},parity:{name:"Parity of data",type:"select",options:{none:"None",even:"Even",odd:"Odd",mark:"Mark",space:"Space"},condition:function(e,t){return"serial"===e.serial.coms[t].mode}},RTSCTS:{name:"RTS/CTS",type:"checkbox",condition:function(e,t){return"serial"===e.serial.coms[t].mode}},XONXOFF:{name:"XON/XOFF",type:"checkbox",condition:function(e,t){return"serial"===e.serial.coms[t].mode}},name:{name:"Name of port",type:"text"},entries:{name:"Number of entries",type:"number",min:0,step:1},numeric:{name:"Treat value as number",type:"checkbox"},average:{name:"Take average",type:"checkbox"},factor:{name:"Factor",type:"number"},digits:{name:"Digits/rounding",type:"number",min:0,step:1},alwaysPositive:{name:"Always positive",type:"checkbox"},timeoutReset:{name:"Reset after timeout",type:"checkbox"},timeout:{name:"Timeout in seconds",type:"number",min:0,step:1},prefix:{name:"Prefix",type:"text",condition:function(e,t){return"serial"===e.serial.coms[t].mode}},postfix:{name:"Suffix",type:"text",condition:function(e,t){return"serial"===e.serial.coms[t].mode}}}]}}),N=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).openConfigModal=function(e){n.setState({configModalIsOpen:!0,comIndex:e})},n.closeConfigModal=function(){n.setState({configModalIsOpen:!1})},n.toggleShowHistory=function(e){n.setState({showHistory:n.state.showHistory.map(function(t,n){return n===e?!t:t})})},n.state={configModalIsOpen:!1,showHistory:e.coms.map(function(e){return!1}),comIndex:-1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.coms.map(function(e,t){return Object(w.a)({index:t},e)}).filter(function(t){return t.name||!e.props.configLocked});return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{isOpen:this.state.configModalIsOpen,onRequestClose:this.closeConfigModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"Serial Configuration Modal"},this.state.configModalIsOpen&&o.a.createElement("form",null,o.a.createElement("h2",null,"Configuration for com",this.state.comIndex),Object(M.makeForm)(k,this.props.config,this.props.api,this.state.comIndex))),t.map(function(n){return o.a.createElement("div",{key:n.index,className:L()("comElement",{"comElement--wide":1===t.length})},o.a.createElement("div",{className:"comElement--title",onClick:function(){e.props.configLocked?!n.average&&n.entries>0&&e.toggleShowHistory(n.index):e.openConfigModal(n.index)}},o.a.createElement("div",{className:"center"},o.a.createElement(I.a,null,o.a.createElement("div",null,n.name)),o.a.createElement(I.a,{compressor:2},o.a.createElement("div",null,n.average&&"Average ".concat(n.entries))))),o.a.createElement("div",{className:L()("comElement--content",{"comElement--content--testMode":"test"===n.mode})},e.state.showHistory[n.index]&&n.history?o.a.createElement("div",{className:"comElement--content--history"},n.history.slice(0,e.props.config.serial.coms[n.index].entries).map(function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,e.timeString),o.a.createElement("div",null,e.entry))})):o.a.createElement("div",{className:"center"},o.a.createElement(I.a,{compressor:.9},o.a.createElement("div",null,n.entry)))))}))}}]),t}(a.Component);var T=Object(r.b)(function(e){return{coms:e.config.serial.coms.map(function(t,n){return Object(w.a)({},t,e.internal.coms[n])}),configLocked:e.config.locked,config:e.config}})(N);n(111);b.a.setAppElement("#root");var S={output:{ports:[{name:{name:"Name of output",type:"text"},formula:{name:"Formula for output",type:"text"},execute:{name:"Only on execute",type:"checkbox"},seconds:{name:"Timeout in seconds",type:"number",min:0,step:1},manualConfirmation:{name:"Manual requires confirmation",type:"checkbox"}}]}},F=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).openConfigModal=function(e){n.setState({configModalIsOpen:!0,configPortIndex:e})},n.closeConfigModal=function(){n.setState({configModalIsOpen:!1})},n.state={configModalIsOpen:!1,configPortIndex:-1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{isOpen:this.state.configModalIsOpen,onRequestClose:this.closeConfigModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"Output Configuration Modal"},this.state.configModalIsOpen&&o.a.createElement("form",null,o.a.createElement("h2",null,"Configuration for output ",this.state.configPortIndex+1),Object(M.makeForm)(S,this.props.config,this.props.api,this.state.configPortIndex))),o.a.createElement("div",{className:"buttonList"},o.a.createElement("div",{className:"buttonList--title"},o.a.createElement("div",{className:"center"},o.a.createElement(I.a,null,o.a.createElement("div",null,"Outputs")))),this.props.outputs.map(function(e,t){return Object(w.a)({},e,{index:t})}).filter(function(t,n){return e.props.portsEnabled[n]||""!==t.name||!e.props.configLocked}).map(function(t){var n="buttonList--list--indicator--output";return t.isForced&&(n+="Forced"),t.state?n+="On":t.result&&!t.isForced?n+="Execute":n+="Off",o.a.createElement("div",{key:t.index,className:"buttonList--list--item",onClick:e.props.configLocked?function(){return e.props.api.forceOutput(t.index)}:function(){return e.openConfigModal(t.index)}},o.a.createElement("div",{className:"buttonList--list--indicator "+n},o.a.createElement("div",{className:"center"},o.a.createElement(I.a,{compressor:1.05},o.a.createElement("div",null,t.name)))))})))}}]),t}(a.Component);var j=Object(r.b)(function(e){return{outputs:e.internal.outputs.map(function(t,n){return Object(w.a)({},t,{name:e.config.output.ports[n].name})}),configLocked:e.config.locked,config:e.config,portsEnabled:e.config.output.ports.map(function(e){return""!==e.formula})}})(F);n(113);b.a.setAppElement("#root");var A={input:{ports:[{name:{name:"Name of cell",type:"text"},formula:{name:"Command for input",type:"select",options:{"":"",exe:"Execute",exebl:"Execute Block",teach:"SL Teach",restart:"Restart",shutdown:"Shutdown",command:"COM command"}},commandCom:{name:"COM to send command",type:"select",options:{com0:"COM 0",com1:"COM 1"},condition:function(e,t){return"command"===e.input.ports[t].formula}},commandValue:{name:"Value to send on COM",type:"text",condition:function(e,t){return"command"===e.input.ports[t].formula}},invert:{name:"Invert follow",type:"checkbox"},follow:{name:"Follow output",type:"select",numeric:!0,options:{"-1":"None",0:"Follow ouput 1",1:"Follow ouput 2",2:"Follow ouput 3",3:"Follow ouput 4",4:"Follow ouput 5",5:"Follow ouput 6",6:"Follow ouput 7",7:"Follow ouput 8",8:"Follow ouput 9",9:"Follow ouput 10"}},timeout:{name:"Debounce timeout (ms)",type:"number",min:0,step:1},manualTimeout:{name:"Manual timeout (s)",type:"number",min:0,step:1},manualConfirmation:{name:"Manual requires confirmation",type:"checkbox"}}]}},_=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).openConfigModal=function(e){n.setState({configModalIsOpen:!0,configPortIndex:e})},n.closeConfigModal=function(){n.setState({configModalIsOpen:!1})},n.state={configModalIsOpen:!1,configPortIndex:-1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{isOpen:this.state.configModalIsOpen,onRequestClose:this.closeConfigModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"Input Configuration Modal"},this.state.configModalIsOpen&&o.a.createElement("form",null,o.a.createElement("h2",null,"Configuration for input ",this.state.configPortIndex+1),Object(M.makeForm)(A,this.props.config,this.props.api,this.state.configPortIndex))),o.a.createElement("div",{className:"buttonList inputList"},o.a.createElement("div",{className:"buttonList--title"},o.a.createElement("div",{className:"center"},o.a.createElement(I.a,null,o.a.createElement("div",null,"Inputs")))),this.props.inputs.map(function(e,t){return Object(w.a)({},e,{index:t})}).filter(function(t,n){return e.props.portsEnabled[n]||""!==t.name||!e.props.configLocked}).map(function(t){var n="buttonList--list--indicator--input";return t.isForced&&(n+="Forced"),n+=t.state?"On":"Off",o.a.createElement("div",{key:t.index,className:"buttonList--list--item",onClick:e.props.configLocked?function(){return e.props.api.forceInput(t.index)}:function(){return e.openConfigModal(t.index)}},o.a.createElement("div",{className:"buttonList--list--indicator "+n},o.a.createElement("div",{className:"center"},o.a.createElement(I.a,{compressor:1.05},o.a.createElement("div",null,t.name)))))})))}}]),t}(a.Component);var R=Object(r.b)(function(e){return{inputs:e.internal.inputs.map(function(t,n){return Object(w.a)({},t,{name:e.config.input.ports[n].name})}),configLocked:e.config.locked,config:e.config,portsEnabled:e.config.input.ports.map(function(e){return""!==e.formula})}})(_),U=(n(115),function(e){var t,n=e.index,a=e.cell;switch(a.type){case"manual":t=o.a.createElement("input",{type:e.cell.numeric?"number":"text",className:L()("tableCell--content--input",{"tableCell--content--input--text":!a.numeric},{"tableCell--content--input--numeric":a.numeric}),onChange:function(t){return e.manualFunction(n,t.target.value)},value:a.value}),e.cell.numeric&&(t=o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{onClick:function(){e.manualFunction(n,Number(a.value)-1)}},"-"),t,o.a.createElement("button",{onClick:function(){e.manualFunction(n,Number(a.value)+1)}},"+")));break;case"menu":var i=a.menuOptions||[];t=o.a.createElement("select",{className:L()("tableCell--content--input",{"tableCell--content--input--text":!a.numeric},{"tableCell--content--input--numeric":a.numeric}),onChange:function(t){return e.manualFunction(n,t.target.value)},value:a.value},i.map(function(e){return o.a.createElement("option",{value:e.key},e.value)})),a.numeric&&(t=o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{onClick:function(){var t=i.findIndex(function(e){return e.key===Number(a.value)})-1;t<0&&(t=i.length-1),e.manualFunction(n,i[t].key)}},"-"),t,o.a.createElement("button",{onClick:function(){var t=i.findIndex(function(e){return e.key===Number(a.value)})+1;0!==t&&t!==i.length||(t=0),e.manualFunction(n,i[t].key)}},"+")));break;case"date":if(!a.value||"0"===a.value){t="";break}var l=Object(M.daysToDate)(a.value);t="".concat(l.getDate(),"-").concat(l.getMonth()+1,"-").concat(l.getFullYear());break;default:t=a.value}return o.a.createElement("div",{className:L()("tableCell",{"tableCell--notFound":e.notFound})},o.a.createElement("div",{className:"tableCell--title",onClick:e.openModal},o.a.createElement(I.a,null,o.a.createElement("div",{className:"center"},a.name))),o.a.createElement("div",{className:"tableCell--content",style:{backgroundColor:!e.notFound&&a.color}},o.a.createElement(I.a,{compressor:.6},o.a.createElement("div",{className:"center"},t))))});n(117);b.a.setAppElement("#root");var D={table:{cells:[{name:{name:"Name of cell",type:"text"},type:{name:"Type of content",type:"select",options:{normal:"Normal",date:"Date",manual:"Input",menu:"Menu",reader:"Reader"}},readerPort:{name:"Reader port",type:"number",min:0,step:1,condition:function(e,t){return"reader"===e.table.cells[t].type}},numeric:{name:"Treat value as a number",type:"checkbox",condition:function(e,t){return"date"!==e.table.cells[t].type}},formula:{name:"Formula for cell value",type:"text",condition:function(e,t){return["normal","date"].includes(e.table.cells[t].type)&&!e.table.cells[t].readerPort}},menuOptions:{name:"Options and values for menu",type:"keyValue",condition:function(e,t){return"menu"===e.table.cells[t].type}},digits:{name:"Number of digits",type:"number",min:0,step:1,condition:function(e,t){return["normal","reader"].includes(e.table.cells[t].type)}},resetOnExe:{name:"Reset value after execute",type:"checkbox"},colorConditions:{name:"Conditions for cell colors",type:"keyValue",options:{"#3fd35d":"Green",yellow:"Yellow","#ffc000":"Orange"}}}]}},P=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).openConfigModal=function(e){n.setState({configModalIsOpen:!0,configCellIndex:e})},n.closeConfigModal=function(){n.setState({configModalIsOpen:!1})},n.state={configModalIsOpen:!1,configCellIndex:-1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.cells.map(function(t,n){return Object(w.a)({index:n},t,e.props.cellConfig[n])}).filter(function(t){return!e.props.configLocked||t.formula||t.name});return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{isOpen:this.state.configModalIsOpen,onRequestClose:this.closeConfigModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"Table Configuration Modal"},this.state.configModalIsOpen&&o.a.createElement("form",null,o.a.createElement("h2",null,"Configuration for cell"," ",String.fromCharCode(65+Math.floor(this.state.configCellIndex/5)),this.state.configCellIndex%5+1),Object(M.makeForm)(D,this.props.config,this.props.api,this.state.configCellIndex))),o.a.createElement("div",{className:"table--grid table--grid--".concat(t.length)},t.map(function(t){return o.a.createElement(U,{key:t.index,cell:t,index:t.index,notFound:e.props.notFound,manualFunction:e.props.api.tableManual,openModal:e.props.configLocked?e.props.openLog:function(){return e.openConfigModal(t.index)}})})))}}]),t}(a.Component);var G=Object(r.b)(function(e){return{cells:e.internal.cells.map(function(t,n){return Object(w.a)({},t,{name:e.config.table.cells[n].name})}),configLocked:e.config.locked,config:e.config,cellConfig:e.config.table.cells,notFound:e.internal.tableNotFound}})(P),H=n(17),q=["","green","yellow","orange","red"],V=["black","white","black","black","white"],B=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).toggleIndividualTable=function(){n.setState({showIndividualTable:!n.state.showIndividualTable})},n.getSLModalContent=function(){var e=n.props.config.serial.coms[1-n.props.comIndex].name,t=n.props.config.serial.coms[n.props.comIndex].name,a=n.props.config.serial.coms[n.props.comIndex].digits,i=[{Header:t,accessor:function(e){return e.entries[0]},Cell:function(e){return e.value.toFixed(a)},id:10,style:{textAlign:"center"},width:70},{Header:"-1",accessor:function(e){return e.entries[1]||""},Cell:function(e){return e.value?e.value.toFixed(a):""},id:2,style:{textAlign:"center"},width:70},{Header:"-2",accessor:function(e){return e.entries[2]||""},Cell:function(e){return e.value?e.value.toFixed(a):""},id:3,style:{textAlign:"center"},width:70},{Header:"-3",accessor:function(e){return e.entries[3]||""},Cell:function(e){return e.value?e.value.toFixed(a):""},id:4,style:{textAlign:"center"},width:70},{Header:"-4",accessor:function(e){return e.entries[4]||""},Cell:function(e){return e.value?e.value.toFixed(a):""},id:5,style:{textAlign:"center"},width:70},{Header:e,accessor:"key",style:{textAlign:"center"},width:200},{Header:n.props.tableExtraColumnTitle,accessor:"extra",style:{textAlign:"center"},width:70},{Header:o.a.createElement("button",{onClick:function(){window.confirm("Are you sure you want to delete all general entries?")&&n.props.api.deleteGeneralSL()}},o.a.createElement("b",null,"Delete")),Cell:function(e){return o.a.createElement("button",{onClick:function(){window.confirm("Are you sure you want to delete general entries for ".concat(e.original.key,"?"))&&n.props.api.deleteGeneralSL(e.original.key)}},"Delete")},id:1,style:{textAlign:"center"},width:70}].map(function(e){return Object(w.a)({},e,{Header:o.a.createElement("b",null,e.Header)})}),l=[{Header:t,accessor:"calibration",style:{textAlign:"center"},width:70,Cell:function(e){return e.value.toFixed(a)},id:12},{Header:e,accessor:"key",style:{textAlign:"center"},width:200},{Header:n.props.tableExtraColumnTitle,accessor:"extra",style:{textAlign:"center"},width:70},{Header:"Tol",accessor:"tolerance",Cell:function(e){return o.a.createElement("div",{style:{backgroundColor:q[Math.min(4,e.original.increments)],color:V[Math.min(4,e.original.increments)]}},e.value.toFixed(1))},style:{textAlign:"center"},width:50},{Header:"Num",accessor:"numUpdates",style:{textAlign:"center"},width:50},{Header:"-1",accessor:function(e){return e.numUpdatesHistory[0]||""},style:{textAlign:"center"},width:50,id:1},{Header:"-2",accessor:function(e){return e.numUpdatesHistory[1]||""},style:{textAlign:"center"},width:50,id:2},{Header:"-3",accessor:function(e){return e.numUpdatesHistory[2]||""},style:{textAlign:"center"},width:50,id:3},{Header:o.a.createElement("button",{onClick:function(){window.confirm("Are you sure you want to delete all individual entries?")&&n.props.api.deleteIndividualSL()}},o.a.createElement("b",null,"Delete")),Cell:function(e){return o.a.createElement("button",{onClick:function(){window.confirm("Are you sure you want to delete the entry for ".concat(e.original.key,"?"))&&n.props.api.deleteIndividualSL(e.original.key)}}," ","Delete")},id:4,style:{textAlign:"center"},width:70}].map(function(e){return Object(w.a)({},e,{Header:o.a.createElement(o.a.Fragment,null,o.a.createElement("b",null,e.Header))})}),r=[],c=[];for(var s in n.props.generalEntries)c.push(Object(w.a)({key:s},n.props.generalEntries[s]));for(var u in n.props.individualEntries)r.push(Object(w.a)({key:u},n.props.individualEntries[u]));return o.a.createElement(o.a.Fragment,null,o.a.createElement("span",null,o.a.createElement(h.a,{checked:n.state.showIndividualTable,onChange:n.toggleIndividualTable}),n.state.showIndividualTable?" Show SL-list":" Show UN-list"),o.a.createElement("span",{className:"selfLearning--modal--buttons"},o.a.createElement("button",{onClick:function(){window.confirm("Are you sure you want to reset the data of the individual selfLearning?")&&n.props.api.resetIndividualSL()}},o.a.createElement("b",null,"Reset"))),n.state.showIndividualTable?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"selfLearning--modal--title"}," UN-list "),o.a.createElement(C.a,{data:r,columns:l})):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"selfLearning--modal--title"}," SL-list "),o.a.createElement(C.a,{style:{textAlign:"center"},data:c,columns:i})))},n.state={showIndividualTable:!0},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(b.a,{isOpen:this.props.isOpen,onRequestClose:this.props.onClose,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"SelfLearning Modal"},this.props.isOpen&&this.getSLModalContent())}}]),t}(a.Component);var W=Object(r.b)(function(e){var t=e.config.locked,n=e.config,a=e.internal.selfLearning.individual,o=e.config.selfLearning.tableExtraColumnTitle;return Object(w.a)({},e.internal.selfLearning,{configLocked:t,config:n,individual:a,tableExtraColumnTitle:o})})(B),X=(n(119),n(121),n(64));b.a.setAppElement("#root");var K=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).openSLModal=function(){n.setState({SLModalIsOpen:!0})},n.closeSLModal=function(){n.setState({SLModalIsOpen:!1})},n.openConfigModal=function(){n.setState({configModalIsOpen:!0})},n.closeConfigModal=function(){n.setState({configModalIsOpen:!1})},n.state={SLModalIsOpen:!1,configModalIsOpen:!1,showIndividualTable:!1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=0;Object(X.isUndefined)(this.props.comIndex)||(e=this.props.config.serial.coms[this.props.comIndex].digits);var t={selfLearning:{enabled:{name:"Enabled type",type:"select",options:{off:"Off",com0:"Com 0",com1:"Com 1",com0ind:"Com 0 Individual",com1ind:"Com 1 Individual"}},normal:{type:"conditional",condition:function(e){return!e.selfLearning.enabled.endsWith("ind")&&"off"!==e.selfLearning.enabled},contents:{LogID:{name:"LogID",type:"external",location:"logger.logID",configuration:{name:"LogID",type:"text"}},startCalibration:{name:"Calibration",type:"number",min:0,step:1,rounding:e},totalNumber:{name:"Total number",type:"number",min:0,step:1},numberPercentage:{name:"SL number %",type:"number",min:0,step:1},tolerance:{name:"Tolerance %",type:"number",min:0,step:1},startTolerance:{name:"Extra tolerance during learning %",type:"number",min:0,step:1}}},individual:{type:"conditional",condition:function(e){return e.selfLearning.enabled.endsWith("ind")},contents:{important:{type:"emphasis",contents:{resetSL:{name:"Reset Self Learning Data",type:"button"},downloadExcel:{name:"Download Excel file",type:"button"},logID:{type:"external",location:"logger.logID",configuration:{name:"LogID",type:"text"}},startCalibration:{name:"Calibration",type:"number",min:0,step:1,rounding:e},totalNumber:{name:"Total number",type:"number",min:0,step:1}}},numberPercentage:{name:"SL number %",type:"number",min:0,step:1},tolerance:{name:"Tolerance %",type:"number",min:0,step:1},individualToleranceAbs:{name:"Individual tolerance",type:"number",min:0,step:1,condition:function(e){return e.selfLearning.enabled.endsWith("ind")}},individualTolerance:{name:"Individual tolerance %",type:"number",min:0,step:1,condition:function(e){return e.selfLearning.enabled.endsWith("ind")}},individualCorrectionIncrement:{name:"Correction %",type:"number",min:0,step:1,condition:function(e){return e.selfLearning.enabled.endsWith("ind")}},individualCorrectionLimit:{name:"Correction limit (max 9)",type:"number",min:0,max:9,step:1,condition:function(e){return e.selfLearning.enabled.endsWith("ind")}},excelIndividualColumn:{name:"Excel column - Com Ind",type:"select",options:Object(H.a)(Array(26).keys()).map(function(e){return String.fromCharCode("A".charCodeAt(0)+e)})},excelDateColumn:{name:"Excel column - Date",type:"select",options:Object(H.a)(Array(26).keys()).map(function(e){return String.fromCharCode("A".charCodeAt(0)+e)})},uploadExcelTemplate:{name:"Upload Excel Template",type:"button"},title:{name:"List column configuration",type:"title"},firstTopFormula:{name:"#1 Top Formula",type:"text"},secondTopFormula:{name:"#2 Top Formula",type:"text"},extraColumns:{name:"Additional columns",type:"structArray",structure:{title:{name:"Title",type:"text"},topFormula:{name:"Top formula",type:"text"},formula:{name:"Formula",type:"text"},type:{name:"Type of content",type:"select",options:{text:"Non-num",number:"Numeric",date:"Date"}},digits:{name:"Digits",type:"number",min:0,step:1}},defaults:{title:"",topFormula:"",formula:"",type:"text",digits:0}}}}}},n=["Self Learning",(this.props.calibration||0).toFixed(this.props.config.serial.coms[this.props.comIndex||0].digits)||0,Math.round(1e3*(this.props.tolerance||0))/10+"%"];return!this.props.individual&&this.props.success&&n.push(Math.round(1e3*(this.props.tolerance||0-this.props.matchedTolerance||0))/10+"%"),o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{isOpen:this.state.configModalIsOpen,onRequestClose:this.closeConfigModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"SelfLearning Configuration Modal"},this.state.configModalIsOpen&&o.a.createElement("form",null,o.a.createElement("h2",null,"Configuration for SelfLearning"),Object(M.makeForm)(t,this.props.config,this.props.api))),o.a.createElement(W,{isOpen:this.state.SLModalIsOpen,onClose:this.closeSLModal,api:this.props.api}),o.a.createElement("div",{className:L()("selfLearning",["selfLearning--inProgress","selfLearning--success","selfLearning--warning"][this.props.success||0]),onClick:this.props.configLocked?this.props.individual?this.openSLModal:null:this.openConfigModal},n.map(function(e,t){return o.a.createElement("div",{key:t,className:"selfLearning--cell"},o.a.createElement("div",{className:"center"},o.a.createElement(I.a,{compressor:.65},o.a.createElement("div",null,e))))})))}}]),t}(a.Component);var Y=Object(r.b)(function(e){var t=e.config.locked,n=e.config,a=e.internal.selfLearning.individual,o=e.config.selfLearning.tableExtraColumnTitle;return Object(w.a)({},e.internal.selfLearning,{configLocked:t,config:n,individual:a,tableExtraColumnTitle:o})})(K),J=(n(125),function(e){return o.a.createElement("div",{className:"logo",onClick:e.onClick},o.a.createElement("img",{className:"center",src:e.image,alt:e.alt}))}),Q=n(65),$=n.n(Q),z=n(39),Z=n.n(z);n(128);b.a.setAppElement("#root");var ee=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).openConfigModal=function(){n.setState({configModalIsOpen:!0})},n.closeConfigModal=function(){n.setState({configModalIsOpen:!1})},n.openListModal=function(){n.setState({listModalIsOpen:!0})},n.closeListModal=function(){n.setState({listModalIsOpen:!1})},n.uploadRef=o.a.createRef(),n.state={configModalIsOpen:!1,listModalIsOpen:!1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t={serial:{title:{name:"Serial",type:"title"},resetTrigger:{name:"Reset on zero",type:"select",options:{off:"Off",on:"On",com0:"Com 0",com1:"Com 1"}}}};return this.props.exposeUpload&&(t=Object(w.a)({},t,{table:{title:{name:"Table",type:"title"},trigger:{name:"Trigger",type:"select",options:["Com 0","Com 1"]},useFile:{name:"Use imported file",type:"checkbox"},waitForOther:{name:"Wait for other com",type:"checkbox"},searchColumn:{name:"Column to search in",type:"select",options:Object(H.a)(Array(26).keys()).map(function(e){return String.fromCharCode("A".charCodeAt(0)+e)})}}})),this.props.exposeUpload&&(t=Object(w.a)({},t,{logger:{title:{name:"Logger",type:"title"},writeToFile:{name:"Write log to file",type:"checkbox"},logID:{name:"LogID",type:"text"},unique:{name:"Unique log type",type:"select",options:{off:"Off",com0:"Com 0",com1:"Com 1"}},resetMode:{name:"Reset mode",type:"select",options:{off:"Off",time:"Time of day",interval:"Time interval"}},resetTime:{name:"Reset time",type:"time",condition:function(e){return"time"===e.logger.resetMode}},resetInterval:{name:"Interval (min)",type:"number",min:0,step:1,condition:function(e){return"interval"===e.logger.resetMode}}}})),this.props.exposeUpload&&(t=Object(w.a)({},t,{FTP:{title:{name:"FTP",type:"title"},automatic:{name:"Automatically upload log on FTP",type:"checkbox"},targets:[1,2].map(function(e){return{title:{name:"Target "+e,type:"subtitle"},address:{name:"Address",type:"text"},folder:{name:"Folder",type:"text"},username:{name:"Username",type:"text"},password:{name:"Password",type:"text"}}})}})),o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{isOpen:this.state.listModalIsOpen,onRequestClose:this.closeListModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"List of loadable configurations"},o.a.createElement("h2",null,"List of saved configurations"),o.a.createElement("form",null,this.props.configList.map(function(t){return o.a.createElement(o.a.Fragment,null,t,o.a.createElement("input",{type:"button",value:"Delete",onClick:function(){return e.props.api.deleteConfig(t)}}),o.a.createElement("input",{type:"button",value:"Load",onClick:function(){return e.props.api.loadConfig(t)}}),o.a.createElement("input",{type:"button",value:"Download",onClick:function(){return e.props.api.downloadConfig(t)}}),o.a.createElement("br",null))}),o.a.createElement("input",{type:"button",value:"Upload",onClick:function(){return e.uploadRef.click()}}),o.a.createElement("input",{type:"button",value:"Load default",onClick:function(){e.props.api.loadConfig("template.json")}})),o.a.createElement("form",{id:"uploadForm",action:"uploadConfig",method:"post",enctype:"multipart/form-data",onChange:function(t){var n=t.target.files[0],a=n.name.match(/V[0-9.]+\.json$/);a?a[0].slice(1,-3).split(".")[0]===e.props.config.version.split(".")[0]?e.props.api.configExists(n.name).then(function(t){console.log(t),t&&!window.confirm("Config already exists. Overwrite?")||e.uploadRef.parentElement.submit()}):alert("Version of new config does not match the current one"):alert("Config does not have a valid name")}},o.a.createElement("input",{style:{display:"none"},type:"file",name:"importConfig",accept:".json",ref:function(t){e.uploadRef=t}}))),o.a.createElement(b.a,{isOpen:this.state.configModalIsOpen,onRequestClose:this.closeConfigModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"General Configuration Modal"},this.state.configModalIsOpen&&o.a.createElement("form",null,o.a.createElement("h2",null,"General configuration"),o.a.createElement("div",{className:"infobar--modalButtons"},o.a.createElement("input",{type:"button",value:"Save config",onClick:function(){var t=prompt("Please enter the name for the new config file:","config");t&&e.props.api.saveConfig(t)}}),o.a.createElement("input",{type:"button",value:"Load config",onClick:function(){e.props.api.getConfigList(),e.openListModal(),e.closeConfigModal()}})),Object(M.makeForm)(t,this.props.config,this.props.api))),o.a.createElement("div",{className:"infobar",onClick:this.props.configLocked?null:this.openConfigModal},o.a.createElement(I.a,{compressor:.8},o.a.createElement("div",{className:"infobar--item"},o.a.createElement("div",{className:"center"},this.props.name))),o.a.createElement(I.a,{compressor:.8},o.a.createElement("div",{className:"infobar--item"},o.a.createElement("div",{className:"center"},this.props.ip))),o.a.createElement(I.a,{compressor:.8},o.a.createElement("div",{className:"infobar--item"},o.a.createElement("div",{className:"center"},Z()(this.props.time).format("HH:mm:ss")))),o.a.createElement(I.a,{compressor:.8},o.a.createElement("div",{className:"infobar--item"},o.a.createElement("div",{className:"center"},Z()(this.props.time).format("DD-MM-YYYY"))))))}}]),t}(a.Component);var te=Object(r.b)(function(e){var t=e.static.name,n=e.misc.ip,a=e.misc.time,o=e.config.locked,i=e.config,l=e.static.exposeUpload;return{name:t,ip:n,time:a,configLocked:o,config:i,configList:e.misc.configList,exposeUpload:l}})(ee);n(130),n(132);b.a.setAppElement("#root");var ne=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).openLogModal=function(){n.setState({logModalIsOpen:!0,reloadInterval:setInterval(n.reloadLogEntries,1e3)}),n.reloadLogEntries()},n.reloadLogEntries=function(e){var t=e?e.target.checked:n.state.logModalUnique;(t?n.props.api.getUniqueLog:n.props.api.getLog)().then(function(e){n.setState({logTableColumns:e.data.legend.map(function(t,n){return{Header:function(){return o.a.createElement("b",null,t)},accessor:e.data.accessors[n],width:Object(M.getColumnWidth)(e.data.entries,e.data.accessors[n]),style:{textAlign:"center"},Cell:function(t){return"number"===typeof t.value?t.value.toFixed(e.data.digits[n]):t.value},name:t}}).filter(function(e,t){return t>=2}).filter(function(e){return n.props.uniqueLogEnabled||"TU"!==e.name}),logEntries:e.data.entries,logModalUnique:t})})},n.closeLogModal=function(){clearInterval(n.state.reloadInterval),n.setState({logModalIsOpen:!1})},e.api.getLogo().then(function(e){e&&n.setState({logo:e})}),n.state={logModalIsOpen:!1,logModalUnique:!1,logEntries:[],logTableColumns:[],logo:$.a,reloadInterval:null},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.loaded?o.a.createElement("div",{id:"page-wrap"},o.a.createElement("div",{className:L()("main",{"main--noinputs":!this.props.showInputs},{"main--notable":!this.props.showTable},{"main--nooutputs":!this.props.showOutputs})},o.a.createElement(b.a,{isOpen:this.state.logModalIsOpen,onRequestClose:this.closeLogModal,overlayClassName:"modalOverlay",className:"modalContent",contentLabel:"Log Modal"},this.props.uniqueLogEnabled&&o.a.createElement("span",null,o.a.createElement(h.a,{checked:this.state.logModalUnique,onChange:this.reloadLogEntries})," ","Only show unique entries"),o.a.createElement("div",{className:"main--logModal"},o.a.createElement("div",null,o.a.createElement("div",{className:"main--logModal--title"},o.a.createElement("b",null,this.state.logModalUnique?"Unique Log":"Normal Log")),o.a.createElement(C.a,{style:{fontSize:14},data:this.state.logEntries,columns:this.state.logTableColumns})))),o.a.createElement("div",{className:"info"},o.a.createElement(te,{api:this.props.api})),o.a.createElement("div",{className:"logo"},o.a.createElement(J,{image:this.state.logo,alt:"LOGO",onClick:this.props.api.openMenu})),o.a.createElement("div",{className:L()("coms",{"coms--noselfLearning":!this.props.showSelfLearning})},this.props.showSelfLearning&&o.a.createElement(Y,{api:this.props.api}),o.a.createElement(T,{api:this.props.api})),this.props.showOutputs&&o.a.createElement("div",{className:"outputs"},this.props.showOutputs&&o.a.createElement(j,{api:this.props.api})," "),this.props.showInputs&&o.a.createElement("div",{className:"inputs"},this.props.showInputs&&o.a.createElement(R,{api:this.props.api})),this.props.showTable&&o.a.createElement("div",{className:"table"},o.a.createElement(G,{api:this.props.api,openLog:this.openLogModal})))):o.a.createElement("div",{className:"loadingScreen"},"Loading")}}]),t}(a.Component);var ae=Object(r.b)(function(e){var t=e.config.locked;return e.config.loaded&&e.static.loaded?{loaded:!0,showTable:e.static.exposeUpload&&(!t||e.config.table.cells.reduce(function(e,t){return e||t.name},!1)),showInputs:e.static.exposeUpload&&(!t||e.config.input.ports.reduce(function(e,t){return e||t.name},!1)),showOutputs:e.static.exposeUpload&&(!t||e.config.output.ports.reduce(function(e,t){return e||t.name},!1)),showSelfLearning:e.static.enabledModules.selfLearning&&(!t||e.internal.selfLearning.enabled),configLocked:t,uniqueLogEnabled:"off"!==e.config.logger.unique}:{loaded:!1}})(ne),oe=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{id:"outer-container"},o.a.createElement(v,{api:this.props.api}),o.a.createElement(ae,{api:this.props.api}))}}]),t}(a.Component),ie=n(4),le=ie.RECEIVE_CONFIG,re=ie.CONFIG_UNLOCK,ce=ie.CONFIG_LOCK,se=ie.CONFIG_CHANGE,ue=n(13).set,me={loaded:!1,locked:!0,hasChanged:!1},pe=n(4).RECEIVE_STATIC,de={loaded:!1},fe=n(134),ge=n(4),he=ge.INPUT_PORT_STATE,Ee=ge.OUTPUT_PORT_STATE,be=ge.SERIAL_COM_STATE,ye=ge.TABLE_CELL_STATE,ve=ge.TABLE_CELL_COLOR,Ce=ge.SELFLEARNING_STATE,Oe=ge.TABLE_FOUND_STATE,Le={coms:[],outputs:[],inputs:[],cells:[],selfLearning:{enabled:!1,formula:"",formulaResults:[]},tableNotFound:!1},we=n(4),xe=we.RECEIVE_IP,Ie=we.RECEIVE_TIME,Me=we.TOGGLE_MENU,ke=we.OPEN_MENU,Ne=we.CLOSE_MENU,Te=we.RECEIVE_CONFIG_LIST,Se=we.RECEIVE_LOG_LIST,Fe={ip:"",time:(new Date).getTime(),isMenuOpen:!1,configList:[],logList:[]},je=Object(c.b)({config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return Object(w.a)({},e,{loaded:!0,hasChanged:!0},t.payload);case re:return Object(w.a)({},e,{locked:!1,hasChanged:!1});case ce:return Object(w.a)({},e,{locked:!0});case se:if(e.locked)return e;var n=t.payload,a=n.address,o=n.value;return ue(e,a,o),Object(w.a)({},e,{hasChanged:!0});default:return e}},static:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return Object(w.a)({loaded:!0},t.payload);default:return e}},internal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case he:var n=t.payload,a=n.index,o=n.state,i=n.isForced,l=Array.from(e.inputs);return l[a]={state:o,isForced:i},Object(w.a)({},e,{inputs:l});case Ee:var r=t.payload,c=r.index,s=r.state,u=r.result,m=r.isForced,p=Array.from(e.outputs);return p[c]={state:s,result:u,isForced:m},Object(w.a)({},e,{outputs:p});case be:var d,f=t.payload,g=f.index,h=f.entry,E=f.entryTime,b=Array.from(e.coms);return e.coms[g]||(e.coms[g]={history:[]}),d=h?[{entry:h,entryTime:E,timeString:fe(new Date(E),"HH:MM:ss")}].concat(Object(H.a)(e.coms[g].history)):e.coms[g].history,b[g]={entry:h,entryTime:E,history:d},Object(w.a)({},e,{coms:b});case ye:var y=t.payload,v=y.index,C=y.value,O=y.manual,L=Array.from(e.cells);return L[v]=Object(w.a)({},L[v],{value:C,manual:O}),Object(w.a)({},e,{cells:L});case ve:var x=t.payload,I=x.index,M=x.color,k=Array.from(e.cells);return k[I]=Object(w.a)({},k[I],{color:M}),Object(w.a)({},e,{cells:k});case Ce:return Object(w.a)({},e,{selfLearning:Object(w.a)({enabled:!0},t.payload)});case Oe:return Object(w.a)({},e,{tableNotFound:t.payload});default:return e}},misc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return Object(w.a)({},e,{ip:t.payload});case Ie:return Object(w.a)({},e,{time:t.payload});case Me:return Object(w.a)({},e,{isMenuOpen:!e.isMenuOpen});case ke:return Object(w.a)({},e,{isMenuOpen:!0});case Ne:return Object(w.a)({},e,{isMenuOpen:!1});case Te:return Object(w.a)({},e,{configList:t.payload});case Se:return Object(w.a)({},e,{logList:t.payload});default:return e}}}),Ae=n(40),_e=n.n(Ae),Re=n(66),Ue=n(67),De=n.n(Ue),Pe=n(18),Ge=n.n(Pe),He=n(4);var qe=function(e){var t=De()(),n={input:He.INPUT_PORT_STATE,output:He.OUTPUT_PORT_STATE,table:He.TABLE_CELL_STATE,tableColor:He.TABLE_CELL_COLOR,entry:He.SERIAL_COM_STATE,selfLearning:He.SELFLEARNING_STATE,ip:He.RECEIVE_IP,time:He.RECEIVE_TIME,notfound:He.TABLE_FOUND_STATE},a=function(a){t.on(a,function(t){e.dispatch({type:n[a],payload:t})})};for(var o in n)a(o);function i(n){n?t.emit("loadConfig",n,function(t){e.dispatch({type:He.RECEIVE_CONFIG,payload:JSON.parse(t)})}):Ge.a.get("/config").then(function(t){console.log("Got config"),e.dispatch({type:He.RECEIVE_CONFIG,payload:t.data})}).catch(function(e){return console.log("/config",e)})}function l(){Ge.a.get("/restart"),setTimeout(function(){i()},5e3)}function r(){return(r=Object(Re.a)(_e.a.mark(function e(){var t;return _e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.prev=1,e.next=4,Ge.a.get("/logo");case 4:t="/logo";case 5:return e.prev=5,e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this,[[1,,5,8]])}))).apply(this,arguments)}function c(){t.emit("getConfigList",null,function(t){e.dispatch({type:He.RECEIVE_CONFIG_LIST,payload:t})})}function s(){t.emit("getLogList",null,function(t){e.dispatch({type:He.RECEIVE_LOG_LIST,payload:t})})}function u(e){return new Promise(function(n){t.emit("configExists",e,function(e){var t=e.result;return n(t)})})}return t.on("clearserial",function(){e.getState().internal.coms.forEach(function(t,n){return e.dispatch({type:He.SERIAL_COM_STATE,payload:{entry:"",entryTime:(new Date).getTime(),index:n}})})}),i(),Ge.a.get("/static").then(function(t){e.dispatch({type:He.RECEIVE_STATIC,payload:t.data}),document.title=t.data.name}),{forceInput:function(n){var a=e.getState(),o=Object(w.a)({},a.config.input.ports[n],a.internal.inputs[n]);o.manualConfirmation&&!o.isForced&&!window.confirm("Are you sure you want to manually change ".concat(o.name,"?"))||t.emit("forceInput",n)},forceOutput:function(n){var a=e.getState(),o=Object(w.a)({},a.config.output.ports[n],a.internal.outputs[n]);o.manualConfirmation&&!o.isForced&&!window.confirm("Are you sure you want to manually change ".concat(o.name,"?"))||t.emit("forceOutput",n)},tableManual:function(e,n){t.emit("manual",{index:e,value:n})},getLog:function(){return Ge.a.get("/comlog")},getUniqueLog:function(){return Ge.a.get("/comlogu")},reboot:l,shutdown:function(){Ge.a.get("/shutdown")},getLogo:function(){return r.apply(this,arguments)},toggleMenu:function(){e.dispatch({type:He.TOGGLE_MENU})},openMenu:function(){e.dispatch({type:He.OPEN_MENU})},closeMenu:function(){e.dispatch({type:He.CLOSE_MENU})},unlockConfig:function(){e.dispatch({type:He.CONFIG_UNLOCK})},saveConfig:function(n){var a=JSON.parse(JSON.stringify(e.getState().config));delete a.loaded,delete a.locked,delete a.hasChanged,n?u(n).then(function(e){e&&!window.confirm("File already exists, do you want to overwrite?")||t.emit("saveConfig",{name:n,config:a})}):e.getState().config.hasChanged?t.emit("checkConfigConsistency",a,function(n){(n||window.confirm("This will reset the log, continue?"))&&window.confirm("Are you sure you want to save these changes?")?(t.emit("settings",a),e.dispatch({type:He.CONFIG_LOCK}),l()):window.location.reload()}):e.dispatch({type:He.CONFIG_LOCK})},changeConfig:function(t,n,a){a&&a.numeric&&(n=Number(n)),e.dispatch({type:He.CONFIG_CHANGE,payload:{address:t,value:n}})},loadConfig:i,getConfigList:c,deleteConfig:function(e){window.confirm("Do you really want to delete "+e+"?")&&(t.emit("deleteConfig",e),c())},downloadConfig:function(e){window.location.href="/downloadConfig?file="+e},deleteGeneralSL:function(e){t.emit("deleteGeneralSL",e)},deleteIndividualSL:function(e){t.emit("deleteIndividualSL",e)},getLogList:s,uploadLog:function(e,n){t.emit("uploadLog",{name:e,index:n},function(e){return window.alert(e)})},deleteLog:function(e){t.emit("deleteLog",e),s()},downloadLog:function(e){window.location.href="/downloadLog?file="+e},downloadAllLogs:function(){window.location.href="/downloadLog?multiFile="+e.getState().misc.logList},deleteAllLogs:function(){for(var n=e.getState().misc.logList,a=0;a<n.length;a++)t.emit("deleteLog",n[a]);s()},configExists:u,resetIndividualSL:function(){t.emit("resetIndividualSL")}}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(184);var Ve=Object(c.c)(je,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());l.a.render(o.a.createElement(r.a,{store:Ve},o.a.createElement(oe,{api:qe(Ve)})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},4:function(e,t){e.exports=function(e){var t={};return e.forEach(function(e){t[e]=e}),t}(["RECEIVE_TIME","RECEIVE_IP","TOGGLE_MENU","OPEN_MENU","CLOSE_MENU","RECEIVE_CONFIG","RECEIVE_STATIC","INPUT_PORT_STATE","OUTPUT_PORT_STATE","SERIAL_COM_STATE","TABLE_CELL_STATE","TABLE_CELL_COLOR","SELFLEARNING_STATE","CONFIG_UNLOCK","CONFIG_LOCK","CONFIG_CHANGE","TABLE_FOUND_STATE","SERIAL_CLEAR","RECEIVE_CONFIG_LIST","RECEIVE_LOG_LIST"])},65:function(e,t,n){e.exports=n.p+"static/media/Logo-MBDC.645b4549.jpg"},68:function(e,t,n){e.exports=n(186)}},[[68,2,1]]]);
//# sourceMappingURL=main.99242fcf.chunk.js.map